\documentclass[runningheads]{llncs}
\usepackage{hyperref}

\usepackage{amsmath, amssymb}
% For moving the title up
\usepackage{titling}
\usepackage{mystyles}
\usepackage{mymacros}

\usepackage{float}
\usepackage{caption}
\usepackage{chngcntr}
\usepackage{tikz}
\usepackage{stmaryrd}

\captionsetup{labelfont=bf, justification=raggedright, singlelinecheck=false}
\counterwithin{figure}{section}
\DeclareCaptionType[fileext=los,placement=H]{protocol}
\counterwithin{protocol}{section}
\DeclareCaptionType[fileext=los,placement=H]{functionality}
\counterwithin{functionality}{section}

\newenvironment{afigure}[2]
    {
    \begin{figure}[H]
    \begin{mdframed}[align=left]
    \caption{\label{#1} \textbf{#2}}
    }
    {
    \end{mdframed}
    \end{figure}
    }

\newenvironment{aprotocol}[2]
    {
    \begin{protocol}
    \begin{mdframed}[align=left]
    \caption{\label{#1} \textbf{#2}}
    }
    {
    \end{mdframed}
    \end{protocol}
    }

\newenvironment{afunctionality}[2]
    {
    \begin{functionality}
    \begin{mdframed}[align=left]
    \caption{\label{#1} \textbf{#2}}
    }
    {
    \end{mdframed}
    \end{functionality}
    }
